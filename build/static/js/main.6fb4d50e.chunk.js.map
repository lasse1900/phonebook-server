{"version":3,"sources":["components/Filter.js","services/persons.js","components/ErrorMessage.js","components/Notification.js","components/AddForm.js","components/PersonForm.js","components/PersonsList.js","App.js","index.js"],"names":["Filter","newFilter","handleFilter","value","onChange","baseUrl","axios","get","then","response","data","newPerson","post","id","newObject","put","delete","ErrorMsg","errorMessage","className","Notification","notificationMessage","AddForm","addPerson","newName","newNumber","nameChange","numberChange","onSubmit","name","type","PersonForm","number","removePerson","onClick","PersonsList","persons","changeNumber","map","person","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","filteredList","setFilteredList","setErrorMessage","setNotificationMessage","useEffect","personService","initialPersons","refreshPage","window","location","reload","ErrorMessage","event","target","filter","toLowerCase","includes","preventDefault","toLocaleLowerCase","confirm","updatePerson","setTimeout","catch","error","returnedPerson","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6fb4d50e.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ newFilter, handleFilter }) => (\n    <p>\n      filter:<input value={newFilter} onChange={handleFilter} />\n    </p>\n  );\n\n  export default Filter;","import axios from \"axios\";\n// const baseUrl = \"http://localhost:3001/api/persons\";\n// for debug use directly to Mongo Atlas\n// const baseUrl = \"https://phonebook-lk.herokuapp.com/api/persons\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson)\n  return request.then(response => response.data)\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data)\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data)\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n};\n","import React from 'react'\n\nconst ErrorMsg = ({ errorMessage }) => {\n  if (errorMessage === null) {\n    return null\n  }\n  return (\n    <div className='error'>\n      {errorMessage}\n    </div>\n  )\n}\n\nexport default ErrorMsg;","import React from 'react'\n\nconst Notification = ({ notificationMessage }) => {\n  if (notificationMessage === null) {\n    return null\n  }\n  return (\n    <div className='notification'>\n      {notificationMessage}\n    </div>\n  )\n}\n\nexport default Notification","import React from \"react\";\n\nconst AddForm = ({\n  addPerson,\n  newName,\n  newNumber,\n  nameChange,\n  numberChange,\n}) => (\n  <form onSubmit={addPerson} name={newName}>\n    <div>\n      name: <input value={newName} onChange={nameChange} />\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={numberChange} />\n    </div>\n    <div>\n      <br />\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default AddForm;","import React from 'react';\n\nconst PersonForm = ({ id, name, number, removePerson }) => (\n  <div>\n    <li className='person'>\n      {name}{' '}\n      {number}{' '}\n      <button onClick={() => removePerson({ id, name })}>delete</button>\n    </li>\n  </div>\n);\n\n\nexport default PersonForm;","import React from \"react\";\nimport PersonForm from \"./PersonForm\";\n\nconst PersonsList = ({ persons, removePerson, changeNumber }) => {\n  return (\n    <div>\n      {persons.map((person) => (\n        <PersonForm\n          key={person.id}\n          id={person.id}\n          name={person.name}\n          number={person.number}\n          removePerson={removePerson}\n          changeNumber={changeNumber}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default PersonsList;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport ErrorMessage from \"./components/ErrorMessage\";\nimport Notification from \"./components/Notification\";\nimport AddForm from \"./components/AddForm\";\nimport PersonsList from \"./components/PersonsList\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [filteredList, setFilteredList] = useState(persons);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n      setFilteredList(initialPersons);\n    });\n  }, []);\n\n  const refreshPage = () => {\n    window.location.reload(false);\n  };\n\n  const handleFilter = (event) => {\n    setNewFilter(event.target.value);\n    setFilteredList(\n      persons.filter((person) =>\n        person.name.toLowerCase().includes(event.target.value.toLowerCase())\n      )\n    );\n  };\n\n  const nameChange = event => { setNewName(event.target.value) };\n  const numberChange = event => { setNewNumber(event.target.value) };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const name = newName;\n    const number = newNumber;\n\n    if (persons.map(person => person.name.toLowerCase()).includes(name.toLocaleLowerCase())) {\n      if (window.confirm(`${name} is already added to the phonebook, do you want to change info?`)) {\n        const id = persons.filter(person => person.name === name)[0].id;\n        const personObject = {\n          id: id,\n          name: name,\n          number: number\n        };\n        personService\n          .update(id, personObject)\n          .then(updatePerson => {\n            setPersons(persons.map(person => person.id !== id ? person : updatePerson));\n            setFilteredList(persons.map(person => person.id !== id ? person : updatePerson));\n            setNewFilter('');\n            setNotificationMessage(`Person ${name} contact info changed`)\n            setTimeout(() => { setNotificationMessage(null) }, 4000);\n          })\n          .catch(error => {\n            setErrorMessage(error.response.data.error)\n            setTimeout(() => { setErrorMessage(null) }, 4000);\n          });\n      }\n      setNewName('');\n      setNewNumber('');\n    } else {\n      const personObject = { name, number };\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setFilteredList(persons.concat(returnedPerson));\n          setPersons(persons.concat(returnedPerson));\n          setNotificationMessage(`Person ${name} added to phonebook`)\n          setTimeout(() => { setNotificationMessage(null) }, 4000)\n        }).catch(error => {\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => { setErrorMessage(null) }, 4000);\n        })\n      setNewName('')\n      setNewNumber('')\n    }\n  };\n\n  const removePerson = (person) => {\n    const confirmDeletion = window.confirm(\n      `Do you want to delete ${person.name} from phonebook?`\n    );\n    if (confirmDeletion) {\n      personService\n        .remove(person.id)\n        .then((response) => setPersons(response.data))\n        .then((response) => {\n          setNotificationMessage(\n            `Person ${person.name} deleted from phonebook`\n          );\n          setTimeout(() => {\n            setNotificationMessage(null);\n          }, 4000);\n        })\n        .catch((error) => {\n          setErrorMessage(\"Person already removed\");\n          console.log(error.response.data)\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 4000);\n        });\n      setTimeout(refreshPage, 3000);\n    }\n  };\n\n  return (\n    <>\n      <h2>New Phonebook</h2>\n      <div>\n        <ErrorMessage errorMessage={errorMessage} />\n        <Notification notificationMessage={notificationMessage} />\n        <Filter newFilter={newFilter} handleFilter={handleFilter} />\n        <div>\n          <div>\n            <AddForm\n              addPerson={addPerson}\n              newName={newName}\n              newNumber={newNumber}\n              nameChange={nameChange}\n              numberChange={numberChange}\n            />\n          </div>\n        </div>\n      </div>\n      <div>\n        <br />\n        <PersonsList persons={filteredList} removePerson={removePerson} />\n      </div>\n      <div></div>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}