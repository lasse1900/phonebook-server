(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t(16),r=t.n(o),a=t(3),i=t(0),u=function(e){var n=e.newFilter,t=e.handleFilter;return Object(i.jsxs)("p",{children:["filter:",Object(i.jsx)("input",{value:n,onChange:t})]})},s=t(4),l=t.n(s),d="/api/persons",j=function(){return l.a.get(d).then((function(e){return e.data}))},b=function(e){return l.a.post(d,e).then((function(e){return e.data}))},f=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},h=function(e){var n=e.errorMessage;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})},O=function(e){var n=e.notificationMessage;return null===n?null:Object(i.jsx)("div",{className:"notification",children:n})},v=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,o=e.nameChange,r=e.numberChange;return Object(i.jsxs)("form",{onSubmit:n,name:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:o})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:r})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),Object(i.jsx)("button",{type:"submit",children:"add"})]})]})},p=function(e){var n=e.id,t=e.name,c=e.number,o=e.removePerson;return Object(i.jsx)("div",{children:Object(i.jsxs)("li",{className:"person",children:[t," ",c," ",Object(i.jsx)("button",{onClick:function(){return o({id:n,name:t})},children:"delete"})]})})},x=function(e){var n=e.persons,t=e.removePerson,c=e.changeNumber;return Object(i.jsx)("div",{children:n.map((function(e){return Object(i.jsx)(p,{id:e.id,name:e.name,number:e.number,removePerson:t,changeNumber:c},e.id)}))})},g=(t(40),function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),s=Object(a.a)(r,2),l=s[0],d=s[1],p=Object(c.useState)(""),g=Object(a.a)(p,2),w=g[0],P=g[1],C=Object(c.useState)(""),N=Object(a.a)(C,2),k=N[0],S=N[1],T=Object(c.useState)(t),y=Object(a.a)(T,2),F=y[0],M=y[1],D=Object(c.useState)(null),E=Object(a.a)(D,2),J=E[0],L=E[1],B=Object(c.useState)(null),I=Object(a.a)(B,2),q=I[0],z=I[1];Object(c.useEffect)((function(){j().then((function(e){o(e),M(e)}))}),[]);var A=function(){window.location.reload(!1)};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"New Phonebook"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(h,{errorMessage:J}),Object(i.jsx)(O,{notificationMessage:q}),Object(i.jsx)(u,{newFilter:k,handleFilter:function(e){S(e.target.value),M(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())})))}}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{children:Object(i.jsx)(v,{addPerson:function(e){e.preventDefault();var n=l,c=w;if(t.map((function(e){return e.name})).includes(n)){if(window.confirm("".concat(n," is already added to the phonebook, do you want to change info?"))){var r=t.filter((function(e){return e.name===n}))[0].id;f(r,{id:r,name:n,number:c}).then((function(e){o(t.map((function(n){return n.id!==r?n:e}))),M(t.map((function(n){return n.id!==r?n:e}))),S(""),z("Person ".concat(n," contact info changed")),setTimeout((function(){z(null)}),4e3)})).catch((function(e){L(e.response.data.error),setTimeout((function(){L(null)}),4e3)}))}d(""),P("")}else{b({name:n,number:c}).then((function(e){M(t.concat(e)),o(t.concat(e)),z("Person ".concat(n," added to phonebook")),setTimeout((function(){z(null)}),4e3)})).catch((function(e){L(e.response.data.error),setTimeout((function(){L(null)}),4e3)})),d(""),P("")}},newName:l,newNumber:w,nameChange:function(e){d(e.target.value)},numberChange:function(e){P(e.target.value)}})})})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),Object(i.jsx)(x,{persons:F,removePerson:function(e){window.confirm("Do you want to delete ".concat(e.name," from phonebook?"))&&(m(e.id).then((function(e){return o(e.data)})).then((function(n){z("Person ".concat(e.name," deleted from phonebook")),setTimeout((function(){z(null)}),4e3)})).catch((function(e){L("Person already removed"),console.log(e.response.data),setTimeout((function(){L(null)}),4e3)})),setTimeout(A,3e3))}})]}),Object(i.jsx)("div",{})]})});t(41);r.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b0386be2.chunk.js.map